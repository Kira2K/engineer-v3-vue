doctype html
html(lang='en')
  include mixin.pug
  head
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    block title
      title Maximus Инженер
    block css
      link(rel='stylesheet', href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback')
      //link(rel='stylesheet', href='/plugins/fontawesome-free/css/all.css')
      link(href="https://unpkg.com/ionicons@4.5.10-0/dist/css/ionicons.min.css" rel="stylesheet")
      link(rel='stylesheet', href='/dist/css/adminlte.min.css')
      link(rel='stylesheet', href='/dist/bootstrap.css')
      link(rel='stylesheet', href='/plugins/jsgrid/jsgrid.css')
      link(rel='stylesheet', href='/plugins/jsgrid/jsgrid-theme.css')
      style.
        body { color: #c9ebff }
        .content-wrapper { background: #121b25 }
        .main-footer { background: #121b25 }
        .card { border-radius: 4px }
        .card-header { background: #213345; }
        .card-header:first-child { border-radius: 4px 4px 0 0; }
        .card-body { background: #213345 }
        .card-footer { background: #213345 }
        .card-footer:last-child { border-radius: 0 0 4px 4px; }
        .form-control, .form-control:focus, option { background-color: #142333; color: #c9ebff }
        .form-control:disabled { background-color: #1F2A38; cursor: not-allowed; color: #c9ebff }
        .btn { background-color: #2a445e; color: #c9ebff; border-radius: 3px }
        .jsgrid-header-row > .jsgrid-header-cell { background: #142333; border-color: #30485c }
        .jsgrid-row > .jsgrid-cell, .jsgrid-alt-row > .jsgrid-cell, .jsgrid-nodata-row > .jsgrid-cell { border-color: #30485c; background: #213345 }
        .jsgrid-cell, .jsgrid-selected-row > .jsgrid-cell,
        .navbar, .main-footer { border-color: #30485c; }
        .jsgrid-grid-header, .jsgrid-grid-body { border-color: #30485c; overflow: auto; }
        .layout-fixed .brand-link img { width: 210px; max-height: 90px; }
        .layout-fixed .brand-link { height: 140px; }
      link(rel='stylesheet', href='/plugins/icheck-bootstrap/icheck-bootstrap.min.css')
      link(rel='stylesheet', href='/plugins/jqvmap/jqvmap.min.css')
      link(rel='stylesheet', href='/plugins/overlayScrollbars/css/OverlayScrollbars.min.css')
      link(rel='stylesheet', href='/plugins/daterangepicker/daterangepicker.css')
      link(rel='stylesheet', href='/plugins/summernote/summernote-bs4.min.css')

      link(rel='stylesheet', href='/plugins/select2/css/select2.min.css')
      link(rel='stylesheet', href='/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css')
      link(rel='stylesheet', href='/plugins/jquery-ui/jquery-ui.css')
      link(rel='stylesheet', href='/plugins/jquery-ui/jquery-ui.structure.css')
  body.hold-transition.sidebar-mini.layout-fixed
    .wrapper
      // Preloader
      //.preloader.flex-column.justify-content-center.align-items-center
      //  img.animation__shake(src='/dist/img/AdminLTELogo.png', alt='AdminLTELogo', height='60', width='60')
      // Navbar
      nav.main-header.navbar.navbar-expand
        // Left navbar links
        ul.navbar-nav
          li.nav-item
            a.nav-link(data-widget='pushmenu', href='#', role='button')
              // i.ion.ion-md-menu
          |       
          li.nav-item.d-none.d-sm-inline-block
            a.nav-link(href='/') Home
        // Right navbar links
        ul.navbar-nav.ml-auto
          li.nav-item
            a.nav-link(data-widget='fullscreen', href='#', role='button')
              i.fas.fa-expand-arrows-alt
          |       
          li.nav-item
            a.nav-link(data-widget='control-sidebar', data-slide='true', href='#', role='button')
              i.fas.fa-th-large

        ul.navbar-nav.ml-auto
          if !grant
            li.nav-item
              a.nav-link(href='/login')
                i.ion.ion-md-log-in
          else
            li.nav-item.dropdown
              a.nav-link(data-toggle='dropdown' href='#' aria-expanded='true')
                i.ion.ion-md-contact
                |  
                = grant.id.preferred_username
              .dropdown-menu.dropdown-menu-lg.dropdown-menu-right
                span.dropdown-item.dropdown-header.disabled
                  i.ion.ion-md-person
                  |  
                  = grant.id.name
                .dropdown-divider
                span.dropdown-item.disabled
                  i.ion.ion-md-mail
                  |  
                  = grant.id.email
                .dropdown-divider
                a.dropdown-item.dropdown-footer(href='/logout')
                  i.ion.ion-md-logout
                  |  Выйти


      // /.navbar
      // Main Sidebar Container
      aside.main-sidebar.elevation-4
        // Brand Logo
        a.brand-link(href='/')
          img.brand-image.img-circle.elevation-3(src='/public/logo.png', alt='Maximus Инженер', style='opacity: .8')
          |       
          // span.brand-text.font-weight-light AdminLTE 3
        // Sidebar
        .sidebar
          // Sidebar Menu
          nav.mt-2
            ul.nav.nav-pills.nav-sidebar.flex-column(data-widget='treeview', role='menu', data-accordion='false')
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-passport')
                a.nav-link(href='/passport')
                  p Паспорта
              else
                a.nav-link.disabled(href='/passport')
                  p Паспорта
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-value')
                a.nav-link(href='/value')
                  p Значения параметров
              else
                a.nav-link.disabled(href='/value')
                  p Значения параметров
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-counterparty')
                a.nav-link(href='/counterparty')
                  p Контрагенты
              else
                a.nav-link.disabled(href='/counterparty')
                  p Контрагенты
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-part')
                a.nav-link(href='/part')
                  p Комплектация
              else
                a.nav-link.disabled(href='/part')
                  p Комплектация
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-branch')
                a.nav-link(href='/branch')
                  p Организационная структура
              else
                a.nav-link.disabled(href='/branch')
                  p Организационная структура
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-malfunction_type')
                a.nav-link(href='/malfunction_type')
                  p Типы неисправностей
              else
                a.nav-link.disabled(href='/malfunction_type')
                  p Типы неисправностей
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-repair_type')
                a.nav-link(href='/repair_type')
                  p Типы ремонта
              else
                a.nav-link.disabled(href='/repair_type')
                  p Типы ремонта
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-toro')
                a.nav-link(href='/toro')
                  p TOPO
              else
                a.nav-link.disabled(href='/toro')
                  p TOPO
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-commission')
                a.nav-link(href='/commission')
                  p Закрепления оборудования
              else
                a.nav-link.disabled(href='/commission')
                  p Закрепления оборудования
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-nomenclature')
                a.nav-link(href='/nomenclature')
                  p Номенклатура
              else
                a.nav-link.disabled(href='/nomenclature')
                  p Номенклатура
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-nomenclaturemodel')
                a.nav-link(href='/nomenclaturemodel')
                  p Модели номенклатуры
              else
                a.nav-link.disabled(href='/nomenclaturemodel')
                  p Модели номенклатуры
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-nomenclaturetype')
                a.nav-link(href='/nomenclaturetype')
                  p Типы номенклатуры
              else
                a.nav-link.disabled(href='/nomenclaturetype')
                  p Типы номенклатуры
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-nomenclaturegroup')
                a.nav-link(href='/nomenclaturegroup')
                  p Групы номенклатуры
              else
                a.nav-link.disabled(href='/nomenclaturegroup')
                  p Групы номенклатуры
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-nomenclatureclass')
                a.nav-link(href='/nomenclatureclass')
                  p Классы номенклатуры
              else
                a.nav-link.disabled(href='/nomenclatureclass')
                  p Классы номенклатуры
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-nomenclatureparameter')
                a.nav-link(href='/nomenclatureparameter')
                  p Параметры номенклатуры
              else
                a.nav-link.disabled(href='/nomenclatureparameter')
                  p Параметры номенклатуры
              li.nav-item
              if grant && grant.access.realm_access.roles.includes('engi-unit')
                a.nav-link(href='/unit')
                  p Единицы измерения
              else
                a.nav-link.disabled(href='/unit')
                  p Единицы измерения
          // /.sidebar-menu
        // /.sidebar
      // Content Wrapper. Contains page content

      .content-wrapper
        // Content Header (Page header)
        .content-header
        // /.content-header
        // Main content
        section.content
          block body
          if env && env.frontDebug
            pre.debug= JSON.stringify(locals, 0, 2)
      footer.main-footer
        strong
          | Maximus 
          | &copy; 2021 
        .float-right.d-none.d-sm-inline-block
          b Version
          |  3.1.0
      // Control Sidebar
      aside.control-sidebar.control-sidebar-dark
    block script
      script(src='https://cdnjs.cloudflare.com/ajax/libs/url-search-params/1.1.0/url-search-params.max.js')

      script(src='/plugins/jquery/jquery.js')
      script(src='/plugins/jquery-ui/jquery-ui.min.js')
      script.
        $.widget.bridge('uibutton', $.ui.button)
      script(src='/plugins/bootstrap/js/bootstrap.bundle.min.js')
      script(src='/plugins/chart.js/Chart.min.js')
      script(src='/plugins/sparklines/sparkline.js')
      script(src='/plugins/jquery-knob/jquery.knob.min.js')
      script(src='/plugins/moment/moment.min.js')
      script(src='/plugins/daterangepicker/daterangepicker.js')
      script(src='/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js')
      script(src='/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js')
      script(src='/dist/js/adminlte.js')

      script(src='/plugins/select2/js/select2.full.min.js')
      script(src='/plugins/jsgrid/jsgrid.js')
      script(src='/plugins/jquery-validation/jquery.validate.js')
