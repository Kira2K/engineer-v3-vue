doctype html
html(lang='en')
  include mixin.pug
  head
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    block title
      title Maximus Инженер
    block css
      link(rel='stylesheet', href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback')
      //link(rel='stylesheet', href='/plugins/fontawesome-free/css/all.css')
      link(href="https://unpkg.com/ionicons@4.5.10-0/dist/css/ionicons.min.css" rel="stylesheet")
      link(rel='stylesheet', href='/dist/css/adminlte.min.css')
      link(rel='stylesheet', href='/dist/bootstrap.css')
      link(rel='stylesheet', href='/plugins/jsgrid/jsgrid.css')
      link(rel='stylesheet', href='/plugins/jsgrid/jsgrid-theme.css')
      style.
        body { color: #c9ebff }
        .content-wrapper { background: #121b25 }
        .main-footer { background: #121b25 }
        .card { border-radius: 4px }
        .card-header { background: #213345; }
        .card-header:first-child { border-radius: 4px 4px 0 0; }
        .card-body { background: #213345 }
        .card-footer { background: #213345 }
        .card-footer:last-child { border-radius: 0 0 4px 4px; }
        .form-control, .form-control:focus, option { background-color: #142333; color: #c9ebff }
        .form-control:disabled { background-color: #1F2A38; cursor: not-allowed; color: #c9ebff }
        .btn { background-color: #2a445e; color: #c9ebff; border-radius: 3px }
        .jsgrid-header-row > .jsgrid-header-cell { background: #142333; border-color: #30485c }
        .jsgrid-row > .jsgrid-cell, .jsgrid-alt-row > .jsgrid-cell, .jsgrid-nodata-row > .jsgrid-cell { border-color: #30485c; background: #213345 }
        .jsgrid-cell, .jsgrid-selected-row > .jsgrid-cell,
        .navbar, .main-footer { border-color: #30485c; }
        .jsgrid-grid-header, .jsgrid-grid-body { border-color: #30485c; overflow: auto; }
        .layout-fixed .brand-link img { width: 210px; max-height: 90px; }
        .layout-fixed .brand-link { height: 140px; }
      link(rel='stylesheet', href='/plugins/icheck-bootstrap/icheck-bootstrap.min.css')
      link(rel='stylesheet', href='/plugins/jqvmap/jqvmap.min.css')
      link(rel='stylesheet', href='/plugins/overlayScrollbars/css/OverlayScrollbars.min.css')
      link(rel='stylesheet', href='/plugins/daterangepicker/daterangepicker.css')
      link(rel='stylesheet', href='/plugins/summernote/summernote-bs4.min.css')

      link(rel='stylesheet', href='/plugins/select2/css/select2.min.css')
      link(rel='stylesheet', href='/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css')
      link(rel='stylesheet', href='/plugins/jquery-ui/jquery-ui.css')
      link(rel='stylesheet', href='/plugins/jquery-ui/jquery-ui.structure.css')
      link(rel='stylesheet', href='/public/style.css')
      link(rel='stylesheet', href='/public/css/footable.bootstrap.min.css')
      //link(rel='stylesheet', href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css")
  body.hold-transition.sidebar-mini.layout-fixed
    main
      .main-sidemenu
        // Main Sidebar Container
        .main-sidemenu__container
          // Brand Logo
          .main-sidemenu__logo
            a(href='/')
              img(src='/public/logo.png', alt='Maximus Инженер', style='opacity: .8')
              span Инженер
          // Sidebar Menu
          nav.mt-4
            ul.nav.nav-pills.nav-sidebar.flex-column(data-widget='treeview', role='menu', data-accordion='false')
              li.nav-item
                a.nav-link(href='/')
                  ion-icon(name='star')
                  p Домашняя страница
              li.nav-item.menu-open
                a.nav-link
                  ion-icon(name='reader-outline')
                  p Номенклатура
                  ion-icon(name='chevron-up-outline')
                ul.nav.nav-treeview
                  //+nav-item('nomenclatureparameter')
                  //  p Параметры номенклатуры
                  +nav-item('nomenclature')
                    p Номенклатура
                  +nav-item('passport')
                    p Оборудование
              li.nav-item
                a.nav-link
                  ion-icon(name='reader-outline')
                  p Служебные
                  ion-icon(name='chevron-up-outline')
                ul.nav.nav-treeview
                  +nav-item('value')
                    p Значения параметров
                  +nav-item('counterparty')
                    p Контрагенты
                  +nav-item('part')
                    p Комплектация
                  +nav-item('branch')
                    p Организационная структура
                  +nav-item('malfunction_type')
                    p Типы неисправностей
                  +nav-item('repair_type')
                    p Типы ремонта
                  +nav-item('toro')
                    p TOPO
                  +nav-item('commission')
                    p Закрепления
                  +nav-item('nomenclaturemodel')
                    p Модели номенклатуры
                  +nav-item('nomenclaturetype')
                    p Типы номенклатуры
                  +nav-item('nomenclaturegroup')
                    p Групы номенклатуры
                  +nav-item('nomenclatureclass')
                    p Классы номенклатуры
                  +nav-item('nomenclatureparameter')
                    p Параметры номенклатуры
                  +nav-item('unit')
                    p Единицы измерения
          // /.sidebar-menu
      .main-content
        // Navbar
        nav.navbar.navbar-expand
          // Left navbar links
          ul.navbar-nav
            li.nav-item
              a.nav-link(data-widget='pushmenu', href='#', role='button')
                // i.ion.ion-md-menu
            |
            li.nav-item.d-none.d-sm-inline-block
              a.nav-link(href='/')
                ion-icon(name='home-outline')
            li.nav-item.d-none.d-sm-inline-block
              a.nav-link
                ion-icon(name='chevron-forward-outline')
                p Номенклатура
          // Right navbar links
          ul.navbar-nav.ml-auto
            li.nav-item
              a.nav-link(data-widget='fullscreen', href='#', role='button')
                i.fas.fa-expand-arrows-alt
            |
            li.nav-item
              a.nav-link(data-widget='control-sidebar', data-slide='true', href='#', role='button')
                i.fas.fa-th-large

          ul.navbar-nav.ml-auto
            if !grant
              li.nav-item
                a.nav-link(href='/login')
                  i.ion.ion-md-log-in
            else
              li.nav-item.dropdown
                a.nav-link(data-toggle='dropdown' href='#' aria-expanded='true')
                  i.ion.ion-md-contact
                  |
                  = grant.id.preferred_username
                .dropdown-menu.dropdown-menu-lg.dropdown-menu-right
                  span.dropdown-item.dropdown-header.disabled
                    i.ion.ion-md-person
                    |
                    = grant.id.name
                  .dropdown-divider
                  span.dropdown-item.disabled
                    i.ion.ion-md-mail
                    |
                    = grant.id.email
                  .dropdown-divider
                  a.dropdown-item.dropdown-footer(href='/logout')
                    i.ion.ion-md-logout
                    |  Выйти


        // /.navbar
        // Content Wrapper. Contains page content
        div
          // Main content
          section.content
            block body
            if env && env.frontDebug
              - var exposed_locals = Object.assign({}, locals._locals)
              - if (exposed_locals.list) exposed_locals.list = exposed_locals.list.filter((el, n) => n < 10)
              pre.debug(style="font-size: .6rem; line-height: .6rem;")= JSON.stringify(exposed_locals, 0, 2)
        footer
          strong
            | Maximus
            | &copy; 2021
          .float-right.d-none.d-sm-inline-block
            b Version
            |  3.1.0
        // Control Sidebar
        aside.control-sidebar.control-sidebar-dark
    block script
      script(src='https://cdnjs.cloudflare.com/ajax/libs/url-search-params/1.1.0/url-search-params.max.js')

      script(src='/plugins/jquery/jquery.js')
      script(src='/plugins/jquery-ui/jquery-ui.min.js')
      script.
        $.widget.bridge('uibutton', $.ui.button)
      script(src='/plugins/bootstrap/js/bootstrap.bundle.min.js')
      script(src='/plugins/chart.js/Chart.min.js')
      script(src='/plugins/sparklines/sparkline.js')
      script(src='/plugins/jquery-knob/jquery.knob.min.js')
      script(src='/plugins/moment/moment.min.js')
      script(src='/plugins/daterangepicker/daterangepicker.js')
      script(src='/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js')
      script(src='/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js')
      script(src='/dist/js/adminlte.js')

      script(src='/plugins/select2/js/select2.full.min.js')
      script(src='/plugins/jsgrid/jsgrid.js')
      script(src='/plugins/jquery-validation/jquery.validate.js')

      script(src='https://unpkg.com/ionicons@5.5.3/dist/ionicons.js')
      script(src='/public/js/footable.min.js')
